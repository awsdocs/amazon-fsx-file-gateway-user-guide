--------

Amazon S3 File Gateway documentation has been moved to [What is Amazon S3 File Gateway?](https://docs.aws.amazon.com/filegateway/latest/files3/WhatIsStorageGateway.html)

Volume Gateway documentation has been moved to [What is Volume Gateway?](https://docs.aws.amazon.com/storagegateway/latest/vgw/WhatIsStorageGateway.html)

Tape Gateway documentation has been moved to [What is Tape Gateway?](https://docs.aws.amazon.com/storagegateway/latest/tgw/WhatIsStorageGateway.html)

--------

# Troubleshooting: Microsoft Hyper\-V setup<a name="troubleshooting-hyperv-setup"></a>

The following table lists typical issues that you might encounter when deploying Storage Gateway on the Microsoft Hyper\-V platform\.


| Issue | Action to Take | 
| --- | --- | 
| You try to import a gateway and receive the error message: "Import failed\. Unable to find virtual machine import file under location \.\.\."\. ![\[Hyper-V Manager import failed error message window.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-troubleshoot01.png)  |  This error can occur for the following reasons: [\[See the AWS documentation website for more details\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/troubleshooting-hyperv-setup.html)  | 
|  You try to import a gateway and receive the error message: "Import failed\. Import task failed to copy file\." ![\[Hyper-V Manager import failed error message window.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-troubleshoot02.png)  |  If you have already deployed a gateway and you try to reuse the default folders that store the virtual hard disk files and virtual machine configuration files, then this error will occur\. To fix this problem, specify new locations in the **Hyper\-V Settings** dialog box\. ![\[Hyper-V settings window with default virtual hard disks and virtual machines locations selected.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-settings11.png)  | 
|  You try to import a gateway and receive an error message: "Import failed\. Import failed because the virtual machine must have a new identifier\. Select a new identifier and try the import again\." ![\[Hyper-V Manager import failed error message window.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-troubleshoot03.png)  |  When you import the gateway make sure you select the **Copy the virtual machine** option and check the **Duplicate all files** option in the **Import Virtual Machine** dialog box to create a new unique ID for the VM\. The following example shows the options in the **Import Virtual Machine** dialog box that you should use\. ![\[Hyper-V Manager import virtual machine window with copy the virtual machine and duplicate all files selected.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-import03.png)  | 
|  You try to start a gateway VM and receive an error message "The child partition processor setting is incompatible with parent partition\." ![\[Hyper-V Manager could not initialize error message window.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-troubleshoot04.png)  | This error is likely caused by a CPU discrepancy between the required CPUs for the gateway and the available CPUs on the host\. Ensure that the VM CPU count is supported by the underlying hypervisor\. For more information about the requirements for Storage Gateway, see [File Gateway setup requirements](Requirements.md)\. | 
|  You try to start a gateway VM and receive an error message "Failed to create partition: Insufficient resources exist to complete the requested service\." ![\[Hyper-V Manager could not initialize error message window.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-troubleshoot05.png)  |  This error is likely caused by a RAM discrepancy between the required RAM for the gateway and the available RAM on the host\. For more information about the requirements for Storage Gateway, see [File Gateway setup requirements](Requirements.md)\.  | 
|  Your snapshots and gateway software updates are occurring at slightly different times than expected\.  |  The gateway VM's clock might be offset from the actual time, known as clock drift\. Check and correct the VM's time using local gateway console's time synchronization option\. For more information, see [Configuring a Network Time Protocol \(NTP\) server for your gateway](manage-on-premises-fgw.md#MaintenanceTimeSync-fgw)\.  | 
|  You need to put the unzipped Microsoft Hyper\-V Storage Gateway files on the host file system\.  |  Access the host as you do a typical Microsoft Windows server\. For example, if the hypervisor host is name `hyperv-server`, then you can use the following UNC path `\\hyperv-server\c$`, which assumes that the name `hyperv-server` can be resolved or is defined in your local hosts file\.  | 
|  You are prompted for credentials when connecting to hypervisor\. ![\[Windows Security your credentials did not work error message window.\]](http://docs.aws.amazon.com/filegateway/latest/filefsxw/images/hyperv-vm-connect02.png)  |  Add your user credentials as a local administrator for the hypervisor host by using the Sconfig\.cmd tool\.  | 
|  You may notice poor network performance if you enable virtual machine queue \(VMQ\) on a Hyper\-V host that's using a Broadcom network adapter\.  |  For information about a workaround, see the Microsoft documentation, see [Poor network performance on virtual machines on a Windows Server 2012 Hyper\-V host if VMQ is enabled](https://learn.microsoft.com/en-us/troubleshoot/windows-server/networking/poor-network-performance-hyper-v-host-vm)\.  | 